{% extends "base.html" %}

{% block title %}

  Covid data

{% endblock %}
{% block content %}
Covid data daily
{{h}}

<div id="my_dataviz"></div>


<script type="text/javascript">
	// List of words
	var data = [ {% for m in h %}
					{ date: "{{ m.date }}", value: "{{ m.value }}" },
					{% endfor %} ];

// // sort data
//   data.sort(function(b, a) {
//     return a.Value - b.Value;
//   });


	var width = 1000;
	var height = 400;
	var svg = d3.select("#my_dataviz").append("svg")
	            .attr("width", width)
	            .attr("height", height)
	            .attr("transform", "translate(80,30)");




	// Add X axis
	var xScale = d3.scaleLinear()
	.domain([0, d3.max(data, function(d) {
	                   return d.value;
	               })])
	.range([ 0, width]);

	svg.append("g")
	.attr("transform", "translate(0," + height + ")")
	.call(d3.axisBottom(xScale))
	.selectAll("text")
	  .attr("transform", "translate(-10,0)rotate(-45)")
	  .style("text-anchor", "end");



	 // Y axis
	var yScale = d3.scaleBand()
	.range([ 0, height ])
	.domain(data.map(function(d) { return d.date; }))
	.padding(.1);

	svg.append("g")
	.call(d3.axisLeft(yScale))

	//Bars
	svg.selectAll("myRect")
	.data(data)
	.enter()
	.append("rect")
	.attr("x", xScale(0) )
	.attr("y", function(d) { return yScale(d.date); })
	.attr("width", function(d) { return xScale(d.value); })
	.attr("height", yScale.bandwidth() )
	.attr("fill", "#69b3a2");
</script>




{% endblock %}
